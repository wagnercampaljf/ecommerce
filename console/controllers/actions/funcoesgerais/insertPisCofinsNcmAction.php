<?php

namespace console\controllers\actions\funcoesgerais;

use backend\models\PisCofins;

class insertPisCofinsNcmAction extends Action
{
    public function run()
    {

        echo 'inicio';

        $codigos = [
            //Anexo 1
            40161010,
            40169990,
            6813,
            70071100,
            70072100,
            70091000,
            73201000,
            83012000,
            83023000,
            84073390,
            84073490,
            840820,
            840991,
            840999,
            841330,
            84139100,
            84148021,
            84148022,
            841520,
            84212300,
            84213100,
            84314100,
            84314200,
            84339090,
            848310,
            84832000,
            848330,
            848340,
            848350,
            850520,
            85071000,
            8511,
            851220,
            85123000,
            851240,
            85129000,
            85272,
            85365090,
            853910,
            85443000,
            870600,
            8707,
            8708,
            90292010,
            90299010,
            90303921,
            90318040,
            9032892,
            91040000,
            94012000,

            //Anexo 2
            8429,
            843320,
            84333000,
            84334000,
            84335,
            8701,
            8702,
            8703,
            8704,
            8705,
            8706,
            8431,
            84089090,
            84122110,
            84122190,
            84123110,
            87012000,
            8702,
            8704,
            84136019,
            84148019,
            84149039,
            84329000,
            84324000,
            84328000,
            84811000,
            84812090,
            84818092,
            8483601,
            85011019
        ];

        $ncms = [
            84831030,
            90261029,
            27101932,
            34039900,
            35079049,
            38140090,
            39269090,
            40082900,
            40093100,
            40169300,
            40169990,
            58012100,
            59031000,
            70071100,
            70091000,
            73121090,
            73181500,
            73181600,
            73202010,
            73209000,
            83012000,
            83016000,
            83022000,
            84099190,
            84099999,
            84159090,
            84219999,
            84662010,
            84824000,
            84842000,
            85122022,
            85313090,
            85364100,
            85365090,
            87081000,
            87082919,
            87082991,
            87082999,
            87083090,
            87085099,
            87087090,
            87089300,
            87089482,
            87089990,
            95030099
        ];

        foreach ($ncms as $ncm) {
            $model = new PisCofins();
            $model->ncm = (string)$ncm;
            $model->pis_cofins = '01';
            $model->save();
            foreach ($codigos as $k => $codigo) {
                $quantidade_caracteres = strlen($codigo);
                $sub_ncm = substr($ncm, 0, $quantidade_caracteres);
                if ($sub_ncm == $codigo) {
                    $model->pis_cofins = '04';
                    $model->save();
                    break;
                }
            }
        }
    }
}
